#ifdef GL_ES
precision mediump float;
#endif

uniform vec2 u_res;
uniform vec2 u_mouse;
uniform float u_time;
uniform sampler2D u_tex;

void main()
{
    vec2 pos = 300. * (gl_FragCoord.xy + u_mouse) / u_res;
    vec4 res = vec4(0.);

    pos += u_time * 10.;
    res = vec4(max(cos(pos.x), -.2) + max(sin(pos.y), -.2), 0.0, 0.0, 1.0);

    vec2 tex_pos = gl_FragCoord.xy / u_res;
    tex_pos.y = 1. - tex_pos.y;

    res *= texture2D(u_tex, tex_pos);
    gl_FragColor = res;
}
